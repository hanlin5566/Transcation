<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wiitrans.base.db.model.ExamQuesBeanMapper">
	<insert id="insertExamQues" parameterType="com.wiitrans.base.db.model.ExamQuesBean" useGeneratedKeys="true" keyProperty="test_ques_id" >
		INSERT INTO
		trans_test_question(test_id,question_id,`type`,step) VALUES(#{test_id},#{question_id},#{type},#{step})
	</insert>
	
	<delete id="deleteUnFinishedExamQues" parameterType="int">
		DELETE FROM trans_test_question WHERE test_id = #{exam_id}
	</delete>
	
	<select id="selectStrategyByExamId" resultType="com.wiitrans.base.db.model.ExamQuesBean" parameterType="int">
		SELECT * FROM trans_test_question WHERE test_id = #{exam_id} AND `type` = 2
	</select>
	
	<select id="selectSubjectByStrategyId" parameterType="int"
		resultType="com.wiitrans.base.db.model.ExamQuesBean">
		SELECT q.* FROM trans_test_question q INNER JOIN trans_test_answer a ON a.test_ques_id = q.test_ques_id WHERE a.strategy_id = #{strategy_id}
	</select>
</mapper>