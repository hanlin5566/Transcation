<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wiitrans.base.db.model.SentCheckWordServiceMapper">
	<update id="ImportSentCheckWord" parameterType="Map">
		LOAD DATA LOCAL INFILE
		#{fileName} INTO TABLE checkword_sentence(`fid`,`sent_id`,`word`,`index_word`,`index_char`);
	</update>
	<update id="DeleteSentCheckWord" parameterType="int">
		DELETE FROM checkword_sentence WHERE `fid` = #{0} AND `sent_id` = #{1} ;
	</update>
	<update id="ImportUnknown" parameterType="Map">
		LOAD DATA LOCAL INFILE
		#{fileName} IGNORE INTO TABLE checkword_unknown(`word`);
	</update>
	<select id="Check" resultType="com.wiitrans.base.db.model.SentCheckWordBean" parameterType="Map">
		SELECT s.word,s.index_word,s.index_char
		FROM checkword_sentence s
		INNER JOIN checkword_dictionary d ON s.fid = #{0} AND s.sent_id = #{1} AND s.word = d.word
		ORDER BY s.index_word ASC
	</select>
	<select id="CheckVariation" resultType="com.wiitrans.base.db.model.SentCheckWordBean" parameterType="Map">
		SELECT s.word,s.index_word,s.index_char
		FROM checkword_sentence s
		INNER JOIN checkword_variation v ON s.fid = #{0} AND s.sent_id = #{1} AND s.word = v.variation
		ORDER BY s.index_word ASC
	</select>
	<select id="CheckSymbol" resultType="com.wiitrans.base.db.model.SentCheckWordBean" parameterType="Map">
		SELECT s.word,s.index_word,s.index_char
		FROM checkword_sentence s
		INNER JOIN checkword_symbol sy ON s.fid = #{0} AND s.sent_id = #{1} AND s.word = sy.word
		ORDER BY s.index_word ASC
	</select>
	<insert id="InsertWord">
		INSERT IGNORE INTO checkword_dictionary(word)
		VALUES(#{word})
	</insert>
	<insert id="InsertVariation" parameterType="List">
		INSERT IGNORE INTO checkword_variation(word,variation,type)
		<foreach item="item" index="index" collection="list"
			separator="UNION ALL">
			SELECT
			#{item.word,jdbcType=VARCHAR,javaType=string},
			#{item.variation,jdbcType=VARCHAR,javaType=string},
			#{item.type,jdbcType=NUMERIC,javaType=java.lang.Integer}
		</foreach>
	</insert>
</mapper>